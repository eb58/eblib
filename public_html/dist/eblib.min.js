/*! eblib Version:1.0.0 2016-10-04 */!function(a){"use strict";a.fn.ebbind=function(b,c){var d,e=this[0].id,f=this[0].type,g=this;return c=c||e,"text"===f||"password"===f?this.val(b[c]).on("change",function(){b[c]=g.val(),console.log("changed "+e,b[c],b)}).on("keyup",function(){b[c]=g.val(),console.log("changed "+e,g,b[c],b)}):"checkbox"===f?this.prop("checked",b[c]).on("click",function(){b[c]=g.prop("checked"),console.log("changed "+e,b[c],b)}):a("select",this).length?this.setSelectedValue(b[c]).on("selectmenuchange",function(){b[c]=g.getSelectedValue(),console.log("select changed "+e,b[c],b)}):a("input:radio",this).length?this.val(b[c]).on("change",function(){b[c]=g.val(),console.log("radio changed "+e,b[c],b)}):a("textarea",this).length?(d=a("textarea",this),d.val(b[c],this).on("keyup",function(){b[c]=d.val(),console.log("textarea changed "+e,b[c],b)}),this.setTextAreaCounter()):a(".ebselect",this).length&&(d=a("input:checkbox",this),b[c]&&b[c].forEach(function(b){_.isNumber(b)?a(d[b]).prop("checked",!0):a("#"+b.replace(/ /g,""),g).prop("checked",!0)}),d.on("click",function(){b[c]=g.getSelectedValuesAsString(),console.log("textarea changed "+e,b[c],b)})),this}}(jQuery),function(a){a.fn.ebdropdown=function(b,c,d){if(this&&this[0]){var e=this[0].id,f={id:e+"X",width:"100%",disabled:!1,jqueryui:!0,change:function(a,b){}},g=a.extend({},f,b),h="#"+g.id,i=function(b){if(b){var c=""+(b.txt||b.v||b);a(h+" option").filter(function(d,e){return b.txt?a(e).text()===b.txt:b.v?a(e).val()===b.v:a(e).text()===c||a(e).val()===c}).prop("selected","selected"),g.jqueryui&&a(h).selectmenu().selectmenu("refresh")}return this},j=function(){var b=a(h).val();return b&&"null"!==b?b:null},k=function(b){var e=_.map(c,function(a){var b="undefined"!=typeof a.txt?" value="+a.v:"",c="undefined"!=typeof a.txt?a.txt:a;return"<option"+b+">"+c+"</option>"}).join("\n"),f=_.template('<select id="<%=id%>" name="<%=id%>" size="1"><%= o %> </select>');b.html(f({id:g.id,w:g.width,o:e})),i(d),g.jqueryui?(a(h).selectmenu().selectmenu(g),g.disabled&&a(h).selectmenu("disable")):(g.disabled&&a(h).prop("disabled",!0),a(h).change(g.change).width(g.width))};return k(this),this.setSelectedValue=i,this.getSelectedValue=j,this}}}(jQuery),function(a){"use strict";a.fn.eblist=function(b,c){var d=this[0].id,e={height:Math.min(100,50*c.length),width:400},f=a.extend({},e,b);return function(a){var b=_.reduce(c,function(a,b){return a+_.template("<li><%=val%></li>")({val:b})},""),d=_.template('\n            <div class="eblist" style="height:<%=height%>px; width:<%=width%>px;">\n              <ul> <%=options%> </ul>\n            </div>\n')({options:b,width:f.width,height:f.height});a.html(d)}(this),this.id=d,this}}(jQuery),function(a){"use strict";a.fn.ebradio=function(b,c,d){var e=this[0].id,f={vertical:!1,width:400,icon:!1},g=a.extend({},f,b);return function(a){var b=_.reduce(c,function(a,b){return a+_.template('<label><input type="radio" id="<%=val%>" name="<%=name%>"><%=val%></label><%=vertical%>')({name:e,val:b,vertical:g.vertical?"<br>":""})},""),d=_.template('            <div class="ebradio">\n              <%=options%>\n            </div>\n')({options:b});a.html(d)}(this),a("#"+e+" input").checkboxradio(g),this.id=e,this.val=function(b){return _.isString(b)||_.isNumber(b)?(a("#"+e+" #"+b).prop("checked",!0).checkboxradio("refresh"),this):a("#"+e+" input:radio:checked").prop("id")},this}}(jQuery),function(a){"use strict";a.fn.ebselect=function(b,c){c=c||[];var d=this[0].id,e=this,f={height:Math.min(100,50*b.values.length),width:400,values:[{v:"1",txt:"test1"},{v:"2",txt:"test2"}],onselchange:function(a){console.log("selected values:"+a.getSelectedValues())}},g=a.extend({},f,b);return this.id=d,g.values=_.map(g.values,function(a,b){return _.isString(a)?{v:b,txt:a}:a}),c.length&&(_.isNumber(c[0])?_.each(g.values,function(a){a.selected=_.indexOf(c,a.v)>=0}):_.each(g.values,function(a){a.selected=_.indexOf(c,a.txt)>=0})),function(b){var c=_.reduce(g.values,function(a,b){var c=b.selected?'checked="checked"':"";return a+_.template('               <li>                 <input type="checkbox" id="<%=id%>" value="<%=value%>" <%=isselected%> /><%=txt%>\n               </li>')({id:b.txt.replace(/ /g,""),value:b.v,isselected:c,txt:b.txt})},""),e=_.template('            <div class="ebselect" style="height:<%=height%>px; width:<%=width%>px;">\n              <ul> <%=options%> </ul>\n            </div>\n')({options:c,width:g.width,height:g.height});b.html(e),g.disabled&&a("#"+d+" input").prop("disabled",!0)}(this),this.getSelectedValues=function(){return _.pluck(a("#"+d+" .ebselect input:checked"),"value")},this.getSelectedValuesAsString=function(){return _.map(this.getSelectedValues(),function(a,b){return _.findWhere(g.values,{v:parseInt(a)}).txt})},a("#"+d+" .ebselect input").on("change",function(){g.onselchange(e)}),g.onselchange(this),this}}(jQuery),function(a){"use strict";function b(a){var b=("0"+a.getDate()).slice(-2),c=("0"+(a.getMonth()+1)).slice(-2),d=a.getFullYear(),e=("0"+a.getHours()).slice(-2),f=("0"+a.getMinutes()).slice(-2),g=("0"+a.getSeconds()).slice(-2);return b+"."+c+"."+d+" "+e+":"+f+":"+g}a.fn.ebtable=function(b,c,d){function e(){b.debug&&console.log.apply(console,[].slice.call(arguments,0))}function f(b){return a.fn.ebtable.lang[G.lang][b]||b}function g(){return G.flags.config?'<button id ="configBtn">'+f("Anpassen")+' <span class = "ui-icon ui-icon-shuffle"></button>':""}function h(){for(var a=G.selection?'<th class="selectCol"><input id="checkAll" type="checkbox"></th>':"",b=0;b<G.columns.length;b++){var c=G.columns[G.colorder[b]];if(!c.invisible){var d="";if(G.flags.filter){var e='<input type="text" id="<%=colid%>" title="<%=tooltip%>"/>',f='<select id="<%=colid%>"><%=opts%></select>',g=(c.valuelist||[]).reduce(function(a,b){return a+"<option "+b+">"+b+"</option>"},""),h=c.valuelist?f:e;d=_.template(h)({colid:c.id,opts:g,tooltip:c.tooltip})}var i=c.css?' style="'+c.css+'"':"",j='            <th id="<%=colid%>" <%=style%> >\n              <div class="sort_wrapper"><span/><%=colname%></div>\n              <%=fld%>\n             </th>';a+=_.template(j)({colname:c.name.replace(/-/g,"&#8209;").replace(/ /g,"&#0160;"),colid:c.id,fld:d,style:i,tooltip:c.tooltip})}}return a}function i(a){if(H[0]&&H[0].length!==G.columns.length)return e("Definition and Data dont match!"),"";for(var b="",c=G.rowsPerPage*a,d=G.groupdefs,f=c;f<Math.min(c+G.rowsPerPage,I.length);f++){var g=I[f];if(!d||!g.isGroupElement||H.groups[I[f][d.groupid]].isOpen){var h=g.isGroupElement?'class="group"':"";h=g.isGroupHeader?'class="groupheader"':h,b+="<tr>";var i=I[f].selected?' checked="checked" ':" ";if(G.selection&&G.selection.render){var j="<td "+h+">"+G.selection.render(H,g,i)+"</td>";b+=j.replace("input type",'input id="check'+f+'"'+i+" type")}else G.selection&&G.singleSelection?b+="<td "+h+'><input id="check'+f+'" type="radio"'+i+"/></td>":G.selection&&!G.singleSelection&&(b+="<td "+h+'><input id="check'+f+'" type="checkbox"'+i+"/></td>");for(var k=G.colorder,l=0;l<G.columns.length;l++){var m=G.columns[k[l]];if(!m.invisible){var n=I[f][k[l]],o=_.isNumber(n)?n:n||"",p=m.render?m.render(o,g,f):o,q=m.css?' style="'+m.css+'"':"";b+="<td "+h+q+">"+p+"</td>"}}b+="</tr>\n"}}return b}function j(){if(!G.flags.pagelenctrl)return"";var a=G.rowsPerPageSelectValues.reduce(function(a,b){var c=b===G.rowsPerPage?"selected":"";return a+'<option value="'+b+'" '+c+">"+b+"</option>\n"},"");return'<select id="lenctrl">\n'+a+"</select>\n"}function k(){return'<button class="firstBtn"><span class="ui-icon ui-icon-seek-first"></button>              <button class="backBtn"><span  class="ui-icon ui-icon-seek-prev" ></button>              <button class="nextBtn"><span  class="ui-icon ui-icon-seek-next" ></button>              <button class="lastBtn"><span  class="ui-icon ui-icon-seek-end"  ></button>'}function l(){var a=Math.min(G.rowsPerPage*J+1,I.length),b=Math.min(a+G.rowsPerPage-1,I.length),c=H.length===I.length?"":_.template(f("(<%=len%> Einträge insgesamt)"))({len:H.length}),d=_.template(f("<%=start%> bis <%=end%> von <%=count%> Zeilen <%= filtered %>")),e=d({start:a,end:b,count:I.length,filtered:c});return e}function m(b,c,d){if(c){c.selected=d;var f=G.groupdefs,g=c[f.groupid];if(f&&g&&c[f.grouplabel]===f.grouphead){e("Groupheader "+(d?"selected!":"unselected!"),g,c[f.grouplabel]),H.getGroupRows(f,g).forEach(function(a){a.selected=d});for(var h=0;h<I.length;h++)I[h][f.groupid]===g&&a(C+"#check"+h).prop("checked",d)}else e("Row "+(d?"selected!":"unselected!"),b),a(C+"#check"+b).prop("checked",d);G.onSelection&&G.onSelection(b,c,H)}}function n(b){e("selectRows",b);var c=a(b.target).prop("checked");if("checkAll"===b.target.id)I.forEach(function(a,b){m(b,I[b],c)});else{G.singleSelection&&I.forEach(function(a,b){a.selected&&m(b,a,!1)});var d=b.target.id.replace("check","");m(d,I[d],c),a("#checkAll").prop("checked",!1)}}function o(){a(C+"#data input[type=checkbox]").prop("checked",!1),G.onSelection&&H.forEach(function(a,b){a.selected&&m(b,a,!1)})}function p(){var b=A.colColIdFromName(G.sortcolname),c=A.indexOfCol(G.sortcolname),d=G.columns[c],e="asc"===d.order;a(C+"thead div span").removeClass(),a(C+"thead #"+b+" div span").addClass("ui-icon ui-icon-arrow-1-"+(e?"n":"s"))}function q(){var b={desc:"asc",asc:"desc","desc-fix":"desc-fix","asc-fix":"asc-fix"},c=A.indexOfCol(G.sortcolname),d=G.columns[c],e=a.extend([],d.sortmaster?d.sortmaster:G.sortmaster);_(_(d.sortmaster).pluck("col")).indexOf(c)<0&&e.push({col:c,sortformat:d.sortformat,order:d.order}),e.forEach(function(a){G.columns[a.col].order=b[G.columns[a.col].order]||"asc"})}function r(a){var b=a.currentTarget.id;if(b&&G.flags.withsorting)if(o(),G.sortcolname=A.colNameFromColid(b),q(),G.hasMoreResults){var c=G.columns[A.indexOfCol(G.sortcolname)],d={};d[c.dbcol]=c.order,G.reloadData(d)}else s()}function s(){if(G.sortcolname){p();var b=A.indexOfCol(G.sortcolname),c=G.columns[b],d=a.extend([],c.sortmaster?c.sortmaster:G.sortmaster);_(_(c.sortmaster).pluck("col")).indexOf(b)<0&&d.push({col:b,sortformat:c.sortformat,order:c.order}),d.forEach(function(a){a.order=G.columns[a.col].order||"desc"}),I=I.sort(I.rowCmpCols(d,H.groupsdata)),J=0,x(J),e("sorting",G.sortcolname)}}function t(a){e("filtering",a,a.which),o(),w(),J=0,K=Math.floor((I.length-1)/G.rowsPerPage),x(J)}function u(a){if(13===a.which&&G.reloadData){e("reloading",a,a.which);var b=G.columns[A.indexOfCol(G.sortcolname)],c={};b&&(c[b.dbcol]=b.order),G.reloadData(c),a.preventDefault()}}function v(a){return a.target.focus(),!1}function w(){var b=[];a(C+"thead th input[type=text],"+C+"thead th select").each(function(c,d){var e=a(d).val().trim();if(e){var f=a(d).attr("id"),g=A.colNameFromColid(f),h=A.indexOfCol(g),i=A.getRender(g),j=A.getMatch(g);b.push({col:h,searchtext:a.trim(e),render:i,match:j})}}),I=mx(H.filterGroups(G.groupdefs,H.groups)),I=mx(0===b.length?I:I.filterData(b)),s()}function x(b,c){a(C+"#ctrlInfo").html(l()),a(C+"#data tbody").html(i(b)),c&&(a(C+"thead tr").html(h()),a(C+"thead th").off().on("click",r),a(C+"thead input[type=text]").off().on("keypress",u).on("keyup",t).on("click",v),a(C+"thead select").off().on("change",t).on("click",v)),a(C+"#data input[type=checkbox]").off().on("change",n),a(C+"#data input[type=radio]").off().on("change",n),G.singleSelection&&a(C+"#checkAll").hide(),G.afterRedraw&&G.afterRedraw(a(B))}function y(a){E.loadState(localStorage[D]?JSON.parse(localStorage[D]):null),b.getState&&E.loadState(b.getState()),A.checkConfig(),G.columns=G.columns.map(function(a){return a.id=a.name.replace(/[^\d\w]/g,""),a}),K=Math.floor((I.length-1)/G.rowsPerPage);var c=_.template("        <div class='ebtable' style='width:<%=bodyWidth%>px'>\n          <div class='ctrl'>\n            <div id='ctrlLength' style='float: left;'><%= selectLen  %></div>\n            <div id='ctrlConfig' style='float: left;'><%= configBtn  %></div>\n            <div id='ctrlPage1'  style='float: right;'><%= browseBtns %></div>\n          </div>\n          <div id='data' style='overflow-y:auto;overflow-x:auto; max-height:<%= bodyHeight %>px; width:100%'>\n            <table>\n              <thead><tr><%= head %></tr></thead>\n              <tbody><%= data %></tbody>\n            </table>\n          </div>\n          <div class='ctrl'>\n            <div id='ctrlInfo'  style='float: left;' class='ui-widget-content'><%= info %></div>\n            <div style='float: left;' class='ui-widget-content' hidden>Anzahl markierter Aufträge: <span id='cntSel'>0</span></div>\n            <div id='ctrlPage2' style='float: right;' ><%= browseBtns %></div>\n          </div>\n        </div>");a.html(c({head:h(),data:i(J),selectLen:j(),configBtn:g(),browseBtns:k(),info:l(),bodyWidth:G.bodyWidth,bodyHeight:G.bodyHeight})),w(),x(0)}var z,A={indexOfCol:function(a){return _.findIndex(G.columns,function(b){return b.name===a})},colNameFromColid:function(a){return _.findWhere(G.columns,{id:a}).name},colColIdFromName:function(a){return _.findWhere(G.columns,{name:a}).id},colIsInvisible:function(a){return _.findWhere(G.columns,{name:a}).invisible},colIsTechnical:function(a){return _.findWhere(G.columns,{name:a}).technical},getRender:function(a){return _.findWhere(G.columns,{name:a}).render},getMatch:function(b){var c=_.findWhere(G.columns,{name:b}).match;return c?_.isString(c)?a.fn.ebtable.matcher[c]:c:a.fn.ebtable.matcher["starts-with-matches"]},getVisibleCols:function(){return G.columns.filter(function(a){return!a.invisible})},checkConfig:function(){G.columns.forEach(function(a){a.technical=a.technical||!1,a.invisible=a.invisible||!1,a.mandatory=a.mandatory||!1,a.order=a.order||"asc"}),H[0]&&H[0].length!==G.columns.length&&(alert("Data definition and column definition don't match!"),localStorage[D]="",G=a.extend({},F,b));var c=localStorage[D];c&&c.colorder&&c.colorder.length!==G.columns.length&&(alert("Column definition and LocalStorage don't match!"),localStorage[D]="",G=a.extend({},F,b)),G.columns.forEach(function(a){a.technical&&!a.invisible&&alert(a.name+": technical column must be invisble!"),a.mandatory&&a.invisible&&alert(a.name+": mandatory column must be visble!")})}},B=this[0].id,C="#"+B+" ",D="ebtable-"+a(document).prop("title").replace(" ","")+"-"+B+"-v1.0",E={getStateAsJSON:function(){return JSON.stringify({bodyWidth:a(C+".ebtable").width(),rowsPerPage:G.rowsPerPage,colorderByName:G.colorder.map(function(a){return G.columns[a].name}),invisibleColnames:G.columns.reduce(function(a,b){return b.invisible&&!b.technical&&a.push(b.name),a},[]),colwidths:a(C+"th").map(function(b,c){var d=a(c).prop("id"),f=a(c).width(),g=(_.findWhere(G.columns,{id:d})||{}).name;e(a(c).prop("id"),f,g);var h={};return h[g]=f,h}).toArray().filter(function(a){return!a.undefined}).reduce(function(a,b){return b?_.extend(a,b):a},{})})},saveState:function(a){localStorage[D]=a},loadState:function(a){a&&(G.rowsPerPage=a.rowsPerPage,G.bodyWidth=a.tableWidth,G.colorder=[],a.colorderByName.forEach(function(a){var b=A.indexOfCol(a);b>=0&&G.colorder.push(b)}),G.columns.forEach(function(b,c){_.contains(a.colorderByName,b.name)||G.colorder.push(c),_.contains(a.colwidths,b.name)||(b.css="width:"+a.colwidths[b.name]+"px")}),a.invisibleColnames.forEach(function(a){var b=A.indexOfCol(a);b>=0&&(G.columns[b].invisible=!0)}))}},F={columns:[],flags:{filter:!0,pagelenctrl:!0,config:!0,withsorting:!0},bodyHeight:Math.max(200,a(window).height()-100),bodyWidth:Math.max(200,a(window).width()-10),rowsPerPageSelectValues:[10,25,50,100],rowsPerPage:10,colorder:_.range(b.columns.length),selection:!1,singleSelection:!1,saveState:E.saveState,loadState:E.loadState,sortmaster:[],groupdefs:{},hasMoreResults:d,jqueryuiTooltips:!0,lang:"de"};b.flags=_.extend(F.flags,b.flags);var G=a.extend({},F,b),H=mx(c,G.groupdefs),I=mx(H.slice()),J=0,K=Math.floor((I.length-1)/G.rowsPerPage);return y(this),a(C+"#lenctrl").selectmenu({change:function(a,b){e("change rowsPerPage",a,b.item.value),G.rowsPerPage=Number(b.item.value),J=0,K=Math.floor((I.length-1)/G.rowsPerPage),x(J),G.saveState&&G.saveState(E.getStateAsJSON())}}),a(C+".firstBtn").button().on("click",function(){J=0,x(J)}),a(C+".backBtn").button().on("click",function(){J=Math.max(0,J-1),x(J)}),a(C+".nextBtn").button().on("click",function(){J=Math.min(J+1,K),x(J)}),a(C+".lastBtn").button().on("click",function(){J=K,x(J)}),a(C+"thead th").off().on("click",r),a(C+"thead input[type=text]").off().on("keypress",u).on("keyup",t).on("click",v),a(C+"thead select").off().on("change",t).on("click",v),a(C+"#data input[type=checkbox]").off().on("change",n),a(C+"#data input[type=radio]").off().on("change",n),a(C+"#configBtn").button().off().on("click",function(){z(B)}),a(C+".ebtable,"+C+".ebtable th").resizable({handles:"e",stop:function(a,b){e("stopping resize!"),G.saveState&&G.saveState(E.getStateAsJSON()),a.stopPropagation()}}),G.singleSelection&&a(C+"#checkAll").hide(),a(window).on("resize",function(){}),a.extend(this,{toggleGroupIsOpen:function(a){var b=J;H.groups[a].isOpen=!H.groups[a].isOpen,w(),K=Math.floor((I.length-1)/G.rowsPerPage),J=Math.min(b,K),x(J)},groupIsOpen:function(a){return _.property("isOpen")(H.groups[a])},getFilterValues:function(){var b={};return a(C+"thead th input[type=text],"+C+"thead th select").each(function(c,d){a.trim(a(d).val())&&(b[d.id]=a(d).val().trim())}),b},setFilterValues:function(b){return a(C+"thead th input[type=text],"+C+"thead th select").each(function(c,d){a(d).val(b[d.id])}),w(),K=Math.floor((I.length-1)/G.rowsPerPage),J=0,x(J),this},getStateAsJSON:E.getStateAsJSON,loadState:E.loadState,iterateSelectedValues:function(a){I.filter(function(a){return a.selected}).forEach(a)},getSelectedRows:function(){return I.filter(function(a){return a.selected})}}),z=function(b){a("#"+b+"configDlg").remove();var c=G.colorder.reduce(function(a,b){var c='<li id="<%=name%>" class="ui-widget-content <%=cls%>"><%=name%></li>',d=G.columns[b],e=d.invisible?"invisible":"visible";return a+(d.technical||d.mandatory?"":_.template(c)({name:d.name,cls:e}))},""),d='        <div id="<%=gridid%>configDlg">\n          <ol id="<%=gridid%>selectable" class="ebtableSelectable"> <%= list %> </ol>\n        </div>',g=a(_.template(d)({list:c,gridid:b})),h={open:function(){a("button:contains(Abbrechen)").text(f("Abbrechen")),a("ol#"+b+"selectable").sortable(),a("#"+b+"configDlg li").off("click").on("click",function(c){a("#"+b+'configDlg [id="'+c.target.id+'"]').toggleClass("invisible").toggleClass("visible"),e("change visibility",c.target.id,"now visible:",!col.invisible)})},position:{my:"left top",at:"left bottom",of:C+"#configBtn"},width:250,modal:!0,resizable:!0,closeText:"Schließen",buttons:{OK:function(){var c=[];a("#"+b+"configDlg li.visible").each(function(b,c){G.columns[A.indexOfCol(a(c).prop("id"))].invisible=!1}),a("#"+b+"configDlg li.invisible").each(function(b,c){G.columns[A.indexOfCol(a(c).prop("id"))].invisible=!0}),a("#"+b+"configDlg li").each(function(b,d){c.push(a(d).prop("id"))}),G.colorder=G.columns.map(function(a,b){return a.technical||a.mandatory?b:A.indexOfCol(c.shift())}),G.saveState&&G.saveState(E.getStateAsJSON()),x(J,!0),a(this).dialog("close")},Abbrechen:function(){a(this).dialog("close")}}};g.dialog(h).parent().find(".ui-widget-header").hide()},G.jqueryuiTooltips?this.tooltip():this},a.fn.ebtable.sortformats={"date-de":function(a){var b=a.match(/^(\d{2})\.(\d{2})\.(\d{4})$/);return b?b[3]+b[2]+b[1]:""},"datetime-de":function(a){var b=a.match(/^(\d{2})\.(\d{2})\.(\d{4}) (\d{2}):(\d{2})$/);return b?b[3]+b[2]+b[1]+b[4]+b[5]:""},"datetime-sec-de":function(a){var b=a.match(/^(\d{2})\.(\d{2})\.(\d{4}) (\d{2}):(\d{2}):(\d{2})$/);return b?b[3]+b[2]+b[1]+b[4]+b[5]+b[6]:""},scientific:function(a){return parseFloat(a)}},a.fn.ebtable.matcher={contains:function(a,b){return a.indexOf(b)>=0},"starts-with":function(a,b){return 0===a.indexOf(b)},matches:function(a,b){return a.match(new RegExp(".*"+b,"i"))},"starts-with-matches":function(a,b){return a.match(new RegExp("^"+b.replace(/\*/g,".*"),"i"))},"matches-date":function(a,c){return b(new Date(parseInt(a))).substr(10).indexOf(c)>=0},"matches-date-time":function(a,c){return b(new Date(parseInt(a))).substr(16).indexOf(c)>=0},"matches-date-time-sec":function(a,c){return b(new Date(parseInt(a))).indexOf(c)>=0}},a.fn.ebtable.lang={de:{},en:{"(<%=len%> Einträge insgesamt)":"(<%=len%> entries)","<%=start%> bis <%=end%> von <%=count%>  Einträgen <%= filtered %>":"<%=start%> to <%=end%> of <%=count%> shown entries <%= filtered %>","<%=start%> bis <%=end%> von <%=count%> Zeilen <%= filtered %>":"<%=start%> to <%=end%> of <%=count%> shown entries <%= filtered %>",Anpassen:"Configuration",Abbrechen:"Cancel"}}}(jQuery),function(a){"use strict";a.fn.ebtextarea=function(b){var c=this[0].id,d={title:{text:"Test",fontSize:"12px",pos:"top"},counter:{fontSize:"8px",pos:"bottom"},nrRows:5,nrCols:30,maxByte:1e6},e=a.extend({},d,b),f=function(){var b=ebutils.byteCount(a("#"+c+" textarea").val());a("#"+c+" .ebtextareacnt").text("("+b+"/"+e.maxByte+")")},g="<div>"+("top"===e.title.pos?'<span class="ebtextareatitle">'+e.title.text+"&nbsp;&nbsp;</span>":"")+("top"===e.counter.pos?'<span class="ebtextareacnt"><span>':"")+"</div>",h="<div>"+("bottom"===e.title.pos?'<span class="ebtextareatitle">'+e.title.text+"&nbsp;&nbsp;</span>":"")+("bottom"===e.counter.pos?'<span class="ebtextareacnt"></span>':"")+"</div>",i=_.template('      <div class="ebtextarea">\n        <%=top%>\n        <textarea rows="<%=rows%>" cols="<%=cols%>"></textarea>\n        <%=bottom%>\n      </div>\n')({rows:e.nrRows,cols:e.nrCols,top:g,bottom:h});return a(this).html(i),a("#"+c+" textarea").on("keyup",function(){var b=a("#"+c+" textarea").val(),d=ebutils.byteCount(b);if(d>e.maxByte){for(a.alert("Warnung","Maximal erlaubte Textlänge erreicht.\nText wird abgeschnitten.");(d=ebutils.byteCount(b))>e.maxByte;)b=b.slice(0,-1);a(this).val(b)}f()}),f(),a("#"+c+" .ebtextareatitle").css("font-size",e.counter.fontSize),a("#"+c+" .ebtextareacnt").css("font-size",e.counter.fontSize),this.setTextAreaCounter=f,this}}(jQuery);var ebutils=function(){"use strict";function a(a,b){if(0===a)return"0 Byte";var c=1024,d=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],e=Math.floor(Math.log(a)/Math.log(c));return(parseFloat((a/Math.pow(c,e)).toFixed(b||2))+" "+d[e]).replace(".",",")}function b(a){function b(a,b){b=b||0;var c=a.charCodeAt(b);if(55296<=c&&c<=56319){var d=c,e=a.charCodeAt(b+1);if(isNaN(e))throw"Kein gültiges Schriftzeichen oder Speicherfehler!";return 1024*(d-55296)+(e-56320)+65536}return!(56320<=c&&c<=57343)&&c}for(var c=0,d=0;d<a.length;d++){var e=b(a,d);"number"==typeof e&&(c+=e<128?1:e<2048?2:e<65536?3:e<2097152?4:e<67108864?5:6)}return c}function c(a){var b={img:"image/jpeg",gif:"image/gif",png:"image/png",tif:"image/tif",tiff:"image/tiff",jpg:"image/jpg",jepg:"image/jepg",pdf:"application/pdf",txt:"text/plain",doc:"application/msword",xls:"application/msexcel",docx:"application/vnd.openxmlformats-officedocument"};return b[a]||"unknown"}return{byteCount:b,formatBytes:a,getMimeByExt:c}}(),mx=function(a,b){var c={zero:function(){return a.fill(0)},row:function(b){return a[b]},rows:function(b){return a.filter(function(c,d){return _.isFunction(b)?b(a[c]):_.indexOf(b,d)>=0})},withoutRows:function(b){return a.filter(function(a,c){return _.isFunction(b)?!b(a):_.indexOf(b,c)<0})},col:function(b){return _.range(a.length).map(function(c){return a[c][b]})},cols:function(b){for(var c=[],d=0;d<a.length;d++){for(var e=a[d],f=[],g=0;g<e.length;g++)_.indexOf(b,g)>=0&&f.push(e[g]);c.push(f)}return c},withoutCols:function(b){for(var c=[],d=0;d<a.length;d++){for(var e=a[d],f=[],g=0;g<e.length;g++)_.indexOf(b,g)<0&&f.push(e[g]);c.push(f)}return c}},d=function(){var a={rowMatch:function(a){return function(b){a=_.isArray(a)?a:[a];for(var c=!0,d=0;d<a.length&&c;d++){var e=a[d],f=$.trim(b[e.col]),g=e.match||$.fn.ebtable.matcher["starts-with-matches"];c=c&&g(f,e.searchtext,b)}return c}},filterData:function(b){return this.filter(a.rowMatch(b))}};return{filterData:a.filterData}}(),e=function(){var a={normalizeGroupId:function(a){return a<=0?0:a},isGroupingHeader:function(a,b){return a[b.grouplabel]===b.grouphead},initGroups:function(b){if(b.groupid){var c,d,e,f={};for(d=0;d<this.length;d++)c=this[d],e=a.normalizeGroupId(c[b.groupid]),c.isGroupHeader=c[b.grouplabel]===b.grouphead,c.isGroupElement=e&&!c.isGroupHeader,e&&!f[e]&&(f[e]={isOpen:!1,name:$.trim(c[b.groupname])});for(d=0;d<this.length;d++)c=this[d],e=a.normalizeGroupId(c[b.groupid]),c[b.groupsortstring]=e?f[e].name+" "+e:c[b.groupname];return this.groups=f,this}},filterGroups:function(b,c){return _.filter(this,function(d){var e=a.normalizeGroupId(d[b.groupid]);return!e||a.isGroupingHeader(d,b)||c[e].isOpen})},getGroupRows:function(a,b){return _.filter(this,function(c){return c[a.groupid]===b})}};return{initGroups:a.initGroups,filterGroups:a.filterGroups,getGroupRows:a.getGroupRows}}(),f=function(){var a={toLower:function(a){return _.isString(a)?a.toLowerCase():a},prepareItem:function(b,c,d,e,f){var g=b[c]||"";return a.toLower(d?d(g,b,e,f):g)},rowCmpCols:function(b,c){return b=_.isArray(b)?b:[b],function(d,e){for(var f=0;f<b.length;f++){var g=b[f],h=g.sortformat?$.fn.ebtable.sortformats[g.sortformat]:void 0,i=a.prepareItem(d,g.col,h,c,g.order),j=a.prepareItem(e,g.col,h,c,g.order),k=i<j?-1:i>j?1:0;if(0!==k){var l=!g.order||g.order.indexOf("desc")<0;return l?k:-k}}return 0}}};return{rowCmpCols:a.rowCmpCols}}(),g=(function(){var a=0,b=10,c=Math.floor((this.length-1)/b),d={setPageSize:function(d){a=0,b=d,c=Math.floor((this.length-1)/d)},getCurPageData:function(){var c=b*a;return this.rows(_.range(c,c+b))}};return{pageFirst:function(){a=0},pagePrev:function(){a=Math.max(0,a-1)},pageNext:function(){a=Math.min(a+1,c)},pageLast:function(){a=c},setPageSize:d.setPageSize,getCurPageData:d.getCurPageData}}(),_.extend(a,c,f,d,e));return b&&g.initGroups(b),g};